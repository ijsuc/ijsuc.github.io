(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p='';return __webpack_require__(0)})([function(module,exports){'use strict';var distance=function distance(coord1,coord2){return Math.floor(Math.pow(Math.pow(coord1.x-coord2.x,2)+Math.pow(coord1.y-coord2.y,2),1/2))};var centre=function centre(coord1,coord2){return{x:(coord1.x+coord2.x)/2,y:(coord1.y+coord2.y)/2}};var points=[{x:59,y:42,name:'A'},{x:553,y:137,name:'B'},{x:725,y:47,name:'C'},{x:800,y:400,name:'D'},{x:653,y:643,name:'E'},{x:91,y:686,name:'F'},{x:59,y:617,name:'G'},{x:297,y:572,name:'H'},{x:48,y:560,name:'I'},{x:68,y:63,name:'J'},{x:501,y:223,name:'K'},{x:581,y:552,name:'L'},{x:144,y:632,name:'M'},{x:75,y:551,name:'N'},{x:181,y:215,name:'O'},{x:75,y:279,name:'P'},{x:87,y:175,name:'Q'},{x:195,y:361,name:'R'}];var links=['AB','BC','CD','DE','EF','FG','GH','HI','IA','JK','KC','KB','CL','LM','ME','NP','OP','NL','OJ','OL','PQ','PR','OQ','OR'];var pointByName=new Map;var distances=new Map;var start=document.querySelector('#from');var end=document.querySelector('#to');var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=points[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var point=_step.value;pointByName.set(point.name,point);var option1=document.createElement('option');var option2=document.createElement('option');option1.innerHTML=point.name;option2.innerHTML=point.name;start.appendChild(option1);end.appendChild(option2)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=links[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var link=_step2.value;var d=distance(pointByName.get(link[0]),pointByName.get(link[1]));distances.set(link,d);distances.set(''+link[1]+link[0],d)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var canvas=document.querySelector('#map');var c=canvas.getContext('2d');var drawLine=function drawLine(pointA,pointB){var color=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'#ccc';var lineWidth=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;c.strokeStyle=color;c.lineWidth=lineWidth;c.beginPath();c.moveTo(pointA.x,pointA.y);c.lineTo(pointB.x,pointB.y);c.stroke()};var drawPath=function drawPath(path){for(var i=1;i<path.length;i++){drawLine(path[i-1],path[i],'#0037FF',4)}};var drawName=function drawName(point,name){c.fillStyle='red';c.fillText(name,point.x,point.y)};var drawDistance=function drawDistance(pointA,pointB){var origin=centre(pointA,pointB);drawName(origin,distances.get(''+pointA.name+pointB.name))};var drawMap=function drawMap(){var nameCache=new Set;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=links[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var link=_step3.value;var pointA=pointByName.get(link[0]);var pointB=pointByName.get(link[1]);drawLine(pointA,pointB);if(!nameCache.has(pointA)){drawName(pointA,pointA.name);nameCache.add(pointA)}if(!nameCache.has(pointB)){drawName(pointB,pointB.name);nameCache.add(pointB)}drawDistance(pointA,pointB)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}};var calcShortestPath=function calcShortestPath(fromPoint,toPoint){var shorterPathByPoint=new Map;var searchSider=function searchSider(fromPoint,sourcePath){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=distances[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _distance=_step4.value;if(_distance[0][0]===fromPoint.name){var _ret=function(){var sidePointName=_distance[0][1];if(sourcePath.some(function(pathPoint){return pathPoint.name===sidePointName}))return'continue';var lastPoint=sourcePath[sourcePath.length-1];var journey=lastPoint?lastPoint.journey:0;var point=void 0;journey+=_distance[1];point=shorterPathByPoint.get(sidePointName);if(!point||point.journey>journey){point=Object.create(pointByName.get(sidePointName));point.journey=journey;var pathPoint={journey:journey,point:point};shorterPathByPoint.set(sidePointName,{journey:journey,path:sourcePath.concat([point])});searchSider(point,sourcePath.concat([point]))}}();if(_ret==='continue')continue}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}};searchSider(fromPoint,[]);return shorterPathByPoint.get(toPoint.name)};drawMap();var form=document.querySelector('form');form.addEventListener('submit',function(event){var pointAName=start.value;var pointBName=end.value;if(pointAName===pointBName){event.preventDefault();return}var fromPoint=pointByName.get(pointAName);var shortestPath=calcShortestPath(fromPoint,pointByName.get(pointBName));shortestPath.path.unshift(fromPoint);c.clearRect(0,0,1000,1000);drawMap();drawPath(shortestPath.path);event.preventDefault()},false)}]);